# VKontakte Authentication Plugin for SLogin

## Overview
This plugin allows users to authenticate on your Joomla site using their VKontakte accounts.

## VK Trusted Redirect URI Feature
Starting from recent versions, VKontakte requires specifying a trusted redirect URI for authentication. This plugin now supports using Joomla menu items as redirect URIs to comply with this requirement.

## Setup Instructions

### 1. Create a Menu Item for Callback
1. Go to **Menus** → **Manage** in your Joomla administrator panel
2. Select a menu or create a new one
3. Click **New** to create a new menu item
4. Set the following parameters:
   - **Menu Item Type**: Choose any type (it will be overridden by the plugin)
   - **Title**: Enter a title (e.g., "VK Callback")
   - **Alias**: Enter an alias (e.g., "vkontakte" or "callback/vkontakte")
   - **Status**: Published
   - **Access**: Public
5. Save the menu item

### 2. Configure the VKontakte Plugin
1. Go to **Extensions** → **Plugins** in your Joomla administrator panel
2. Find and open the **SLogin - VKontakte Authentication** plugin
3. In the plugin settings:
   - Enter your VKontakte **Application ID** and **Secret Key**
   - Set **Use Menu Item for Redirect** to **Yes**
   - Select the menu item you created in the **Menu Item for Callback** dropdown
4. Save the plugin settings

### 3. Configure VKontakte Application
1. Log in to your VK Developer account at https://vk.com/dev
2. Open your application settings
3. In the **Trusted redirect URI** field, enter the full URL of your menu item followed by the provider name:
   - Example: `https://your-site.com/your-menu-alias/vkontakte`
   - Important: The URL must end with `/vkontakte`
   - Note: This must match exactly with the URL generated by your menu item (use the "Preview Callback URL" button to check)
4. Save the application settings

### 4. Testing the Authentication
1. Clear your site cache
2. Try logging in with VKontakte
3. The authentication should now use the menu item URL for the redirect

## Troubleshooting
- If you get an error from VK about invalid redirect URI, make sure the URL in your VK application settings exactly matches the URL of your menu item
- Use the "Preview Callback URL" button in the plugin settings to see the exact URL that will be used
- Ensure your menu item is published and accessible to public users
- Check that your server doesn't add or remove trailing slashes from the URL

## Additional Information
- This feature is compatible with Joomla 5.0 and later versions
- The plugin maintains backward compatibility with previous configurations
